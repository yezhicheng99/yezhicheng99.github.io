---
title: 针孔相机模型及相机内参学习笔记
date: 2022-08-10 22:23:50
categories:
tags: ["相机标定"]
top_img:
---

相机模型描述的是三维空间中的坐标点到二维图像上的对应点的映射过程。针孔相机是最简单和常用的相机模型，被广泛应用到工业和科研领域。而相机的内参是相机成像模型中最关键的参数，它通常包括光线的投影过程及畸变过程。

## 针孔相机模型
针孔相机模型实际上就是中学课堂上讲的蜡烛投影成像的过程。下图表示针孔相机模型成像过程。

![](针孔相机模型.PNG)

设空间中一点 $P$ 在相机坐标系 $O-x-y-z$ 下的三维坐标是 $[X, Y, Z]^T$, 改点在成像平面表示的坐标系下 $O^{'}-x^{'}-y^{'}-z^{'}$ 下的坐标为 $[X^{'}, Y^{'}, X^{'}]^{T}$,根据相似三角形关系，得到如下关系：

$$
\frac{Z}{f}=-\frac{X}{X^{'}}=-\frac{Y}{Y^{'}}
$$

为了方便，将成像平面移到物体同一侧：

$$
\frac{Z}{f}=\frac{X}{X^{'}}=\frac{Y}{Y^{'}}
$$

整理得：

$$
X^{'}=f\frac{X}{Z}
Y^{'}=f\frac{Y}{Z}
$$
 
假设成像点在图像上的像素坐标为：$[u, v]^{T}$, 得到以下对应关系：

$$
\left\{ 
\begin{matrix}
u = \alpha X^{'} + c_{x} = \alpha f\frac{X}{Z} + c_{x} = f_{x}\frac{X}{Z} + c_{x} \\
v = \beta Y^{'} + c_{y} = \beta f\frac{Y}{Z} + c_{y} = f_{y}\frac{Y}{Z} + c_{y} \\
\end{matrix}
\right.
$$

其中，$\alpha$ 和 $\beta$ 分别表示点在 $x$ 和 $y$ 轴上的缩放系数，单位是像素 $/$ 米，$c_{x}$ 和 $c_{y}$ 分别表示从图像中心点到图像左上角的像素平移量，单位是像素，$f_{x} = \alpha f$ 以及 $f_{y} = \beta f$ 。

以上方程写成矩阵形式：

$$
\begin{bmatrix}u\\v\\1\end{bmatrix} = \frac{1}{Z}  \begin{bmatrix}f_{x}&0&c_{x}\\0&f_{y}&c_{y}\\0&0&1\end{bmatrix}  \begin{bmatrix}X\\Y\\Z\end{bmatrix} = \frac{1}{Z} K P_{c}
$$

其中矩阵 $K$ 即是相机的内参数矩阵。

上式中 $P$ 点为空间点在相机坐标系下的坐标，所以如果点的坐标为世界坐标系下的坐标，需要根据当前相机位姿将其转换到相机坐标系下：

$$
P_{c} = TP_{w} = RP_{w} + t
$$
